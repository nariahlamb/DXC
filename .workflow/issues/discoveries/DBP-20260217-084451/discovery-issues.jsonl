{"confidence":0.95,"category":"schema-mismatch","line":48,"finding_ids":["F-001"],"id":"ISS-DBP-001","suggestion":"将剧情输入改为嵌套结构或先 flatten StoryState 到兼容字段","file":"utils/state/stateServiceInput.ts","severity":"critical","priority":"P1","title":"剧情输入结构不匹配导致 state 无法稳定填充剧情字段"}
{"confidence":0.9,"category":"field-coverage-gap","line":3,"finding_ids":["F-003"],"id":"ISS-DBP-002","suggestion":"补充 特别关注/记忆/互动记录 等 UI 关键字段","file":"utils/state/stateServiceInput.ts","severity":"high","priority":"P1","title":"社交字段覆盖不足导致仪表盘 NPC 动态缺失"}
{"confidence":0.88,"category":"service-gating","line":293,"finding_ids":["F-004"],"id":"ISS-DBP-003","suggestion":"增加状态补偿任务或在 UI 显示 state 服务未启用提示","file":"hooks/gameLogic/useGameLogicCore.ts","severity":"high","priority":"P1","title":"state 服务启用门槛过高，非 ACTION 或缺 key 时状态不更新"}
{"confidence":0.87,"category":"legacy-write-block","line":146,"finding_ids":["F-005"],"id":"ISS-DBP-004","suggestion":"在命令被拒时注入可见告警并提供自动重写","file":"hooks/gameLogic/useGameLogicCore.ts","severity":"high","priority":"P1","title":"state-owned 模式下 legacy 命令被丢弃，旧提示词会导致字段空白"}
{"confidence":0.86,"category":"cadence-suppression","line":131,"finding_ids":["F-006","F-014"],"id":"ISS-DBP-005","suggestion":"在 UI 提示下次更新时间，或允许手动强制刷新","file":"hooks/gameLogic/microservice/commandGuard.ts","severity":"high","priority":"P2","title":"cadence_not_due 造成世界/论坛信息长时间不刷新"}
{"confidence":0.82,"category":"domain-coverage-gap","line":276,"finding_ids":["F-008"],"id":"ISS-DBP-006","suggestion":"扩展 writer domain 或在 no_command 时回退到通用 upsert_sheet_rows","file":"hooks/gameLogic/microservice/stateVariableWriter.ts","severity":"high","priority":"P2","title":"stateVariableWriter 域覆盖不完整，部分事件无命令输出"}
{"confidence":0.72,"category":"orphan-state-field","line":95,"finding_ids":["F-011"],"id":"ISS-DBP-007","suggestion":"新增专用写入命令或统一派生器更新 日常仪表盘","file":"types/gamestate.ts","severity":"medium","priority":"P2","title":"日常仪表盘字段缺少明确写入源，长期依赖 fallback"}
{"confidence":0.78,"category":"schedule-fragility","line":412,"finding_ids":["F-007"],"id":"ISS-DBP-008","suggestion":"对 nextTurn 异常加修复策略与 fallback 触发","file":"hooks/gameLogic/useGameLogicCore.ts","severity":"medium","priority":"P2","title":"world 更新依赖 下次更新回合，异常值会导致更新停滞"}
{"confidence":0.74,"category":"config-coupling","line":41,"finding_ids":["F-010"],"id":"ISS-DBP-009","suggestion":"在设置页显式提示 memory 继承来源并允许一键解耦","file":"hooks/gameLogic/settings.ts","severity":"medium","priority":"P2","title":"memory 配置默认回退到 state，单独 API 配置易产生隐式耦合"}
{"confidence":0.84,"category":"service-boundary-gap","line":125,"finding_ids":["F-015"],"id":"ISS-DBP-010","suggestion":"memory 不可用时启用最小本地摘要降级","file":"hooks/gameLogic/microservice/commandGuard.ts","severity":"medium","priority":"P2","title":"日志摘要/大纲归 memory-owned，memory 不可用时相关面板可能空白"}
{"confidence":0.77,"category":"payload-truncation","line":80,"finding_ids":["F-017"],"id":"ISS-DBP-011","suggestion":"对关键域提高 maxDepth/maxArrayLength 或提供按表差异化上限","file":"utils/state/stateServiceInput.ts","severity":"medium","priority":"P3","title":"state 输入裁剪可能截断关键上下文，影响填表质量"}
