{"id":"ISS-DSC-20260213-142913-001","discovery_id":"DSC-20260213-142913","title":"将 isFullscreen 状态更新改为基于 fullscreenchange 事件，且仅在 requestFullscreen 成功后更新。","priority":"high","priority_score":0.744,"perspective":"bug","category":"bug/state-sync","file":"components/game/TopNav.tsx","line":46,"description":"requestFullscreen 采用异步 Promise，但当前实现在 Promise resolve 之前就直接 setIsFullscreen(true)。若浏览器拒绝全屏（权限或手势限制），UI 图标会与真实状态不一致。","source_finding_id":"F-001","confidence":0.93}
{"id":"ISS-DSC-20260213-142913-002","discovery_id":"DSC-20260213-142913","title":"新增 TopNav 单测：mock requestFullscreen/exitFullscreen/fullscreenchange，验证图标状态与真实全屏状态一致。","priority":"high","priority_score":0.72,"perspective":"test","category":"test/unit-coverage","file":"components/game/TopNav.tsx","line":43,"description":"现有 TopNav 测试仅覆盖仪表盘按钮打开流程，未覆盖 requestFullscreen 失败及 fullscreenchange 同步场景。","source_finding_id":"F-001","confidence":0.9}
{"id":"ISS-DSC-20260213-142913-003","discovery_id":"DSC-20260213-142913","title":"补充失败分支测试：loadAllSaveSlots reject、getManagedJson 返回空或损坏数据。","priority":"high","priority_score":0.704,"perspective":"test","category":"test/error-path-coverage","file":"components/Home.tsx","line":68,"description":"Home 已覆盖“继续冒险有最新存档”路径，但未覆盖 loadAllSaveSlots/getManagedJson 失败与坏数据分支。","source_finding_id":"F-002","confidence":0.88}
{"id":"ISS-DSC-20260213-142913-004","discovery_id":"DSC-20260213-142913","title":"添加 fullscreenchange 监听并以 document.fullscreenElement 作为单一真实来源。","priority":"high","priority_score":0.688,"perspective":"bug","category":"bug/event-handling","file":"components/game/TopNav.tsx","line":41,"description":"组件只在点击按钮时更新本地状态，未订阅 document.fullscreenElement 变化。用户通过 ESC 或系统手势退出全屏时，按钮图标可能仍显示“退出全屏”。","source_finding_id":"F-002","confidence":0.86}
{"id":"ISS-DSC-20260213-142913-005","discovery_id":"DSC-20260213-142913","title":"改为结构化克隆（structuredClone）或显式字段构建，避免非 JSON 字段丢失。","priority":"high","priority_score":0.672,"perspective":"quality","category":"quality/data-integrity","file":"components/game/modals/SettingsModal.tsx","line":473,"description":"JSON.parse(JSON.stringify(...)) 会丢失 undefined、Date、函数等信息，后续配置结构扩展时容易出现隐蔽问题。","source_finding_id":"F-003","confidence":0.84}
{"id":"ISS-DSC-20260213-142913-006","discovery_id":"DSC-20260213-142913","title":"新增 SettingsModal 测试：非法 JSON 给出错误，合法 JSON 更新指定变量分类。","priority":"high","priority_score":0.656,"perspective":"test","category":"test/integration-coverage","file":"components/game/modals/SettingsModal.tsx","line":1060,"description":"SettingsModal 有 JSON 编辑与错误提示逻辑，但现有测试多为保存/头像保护场景，变量编辑器缺少行为验证。","source_finding_id":"F-004","confidence":0.82}
{"id":"ISS-DSC-20260213-142913-007","discovery_id":"DSC-20260213-142913","title":"若不再支持移动端全屏，删除残留逻辑；若需要支持，补充 UI 入口并加测试。","priority":"medium","priority_score":0.455,"perspective":"quality","category":"quality/dead-code","file":"components/mobile/MobileTopNav.tsx","line":30,"description":"isFullscreen 和 toggleFullscreen 已定义但在 JSX 中未使用，属于残留逻辑，增加维护负担。","source_finding_id":"F-006","confidence":0.91}
