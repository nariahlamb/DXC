{"id":"SOL-ISS-DSC-20260213-125122-001-i001","description":"将 InventoryModal 占位测试替换为可执行组件测试并补齐核心断言。","approach":"以 InventoryModal 当前 UI 文案为锚点，构建最小可复用 fixture，覆盖渲染、筛选、选择与操作回调三条主路径，确保测试可以在 Vitest 中稳定执行。","tasks":[{"id":"T1","title":"Refactor InventoryModal test scaffold","scope":"components/game/modals/InventoryModal.test.tsx","action":"Update","description":"移除占位测试与注释，建立可复用 render helper 与背包 fixture。","modification_points":[{"file":"components/game/modals/InventoryModal.test.tsx","target":"文件头与 describe 初始用例","change":"删除 @ts-nocheck 和占位注释，接入 @testing-library/react 与 vitest 断言"},{"file":"components/game/modals/InventoryModal.test.tsx","target":"测试数据构造","change":"新增至少 3 个 InventoryItem fixture（武器/防具/消耗品）与默认 props 工厂"}],"implementation":["删除 placeholder 代码与未执行的 render 注释，补充标准测试导入。","新增 createItem/createProps/renderModal 帮助函数，统一 mock 回调。","确保 fixture 覆盖已装备与可使用两类分支，避免只验证静态渲染。"],"test":{"unit":["InventoryModal 在 isOpen=true 时渲染标题与槽位信息","默认详情区显示“选择物品查看详情”"],"commands":["npx vitest run components/game/modals/InventoryModal.test.tsx --testTimeout=60000"],"coverage_target":0.75},"acceptance":{"criteria":["InventoryModal.test.tsx 中占位注释条目（Placeholder/TODO/注释 render）= 0","新增可复用 helper 函数数量 >= 2","该文件有效 expect 断言数量 >= 8"],"verification":["执行命令: rg -n \"Placeholder for Unit Tests|TODO: Configure Vitest|render\\(<InventoryModal\" components/game/modals/InventoryModal.test.tsx，应返回 0 行","执行命令: npx vitest run components/game/modals/InventoryModal.test.tsx --testTimeout=60000"]},"commit":{"type":"test","scope":"inventory-modal","message_template":"test(inventory-modal): replace placeholder tests with executable cases","breaking":false},"depends_on":[],"estimated_minutes":25,"priority":1},{"id":"T2","title":"Add filter and selection assertions","scope":"components/game/modals/InventoryModal.test.tsx","action":"Add","description":"补充搜索、分类筛选与物品详情切换断言，验证主要浏览路径。","modification_points":[{"file":"components/game/modals/InventoryModal.test.tsx","target":"搜索与分类相关测试段","change":"新增搜索词输入与分类按钮点击后的列表变更断言"},{"file":"components/game/modals/InventoryModal.test.tsx","target":"详情面板测试段","change":"新增点击物品后右侧详情内容与品质/类型标签断言"}],"implementation":["通过 placeholder=搜索物品... 定位输入框并模拟输入，断言列表收敛。","点击“武器/道具”等分类按钮，验证筛选结果与空状态文案。","选择某个物品后，断言详情区标题、类型标签与操作按钮可见。"],"test":{"unit":["搜索关键字后只保留匹配项","分类切换后展示对应类型","选中物品后显示详情"],"commands":["npx vitest run components/game/modals/InventoryModal.test.tsx --testTimeout=60000"],"coverage_target":0.8},"acceptance":{"criteria":["筛选相关测试用例数量 >= 2","详情面板断言数量 >= 3","空结果场景文案断言数量 = 1"],"verification":["执行命令: npx vitest run components/game/modals/InventoryModal.test.tsx --testTimeout=60000","执行命令: rg -n \"搜索物品|没有找到物品|选择物品查看详情\" components/game/modals/InventoryModal.test.tsx，应至少命中 3 处"]},"commit":{"type":"test","scope":"inventory-modal","message_template":"test(inventory-modal): cover filter and detail flows","breaking":false},"depends_on":["T1"],"estimated_minutes":30,"priority":2},{"id":"T3","title":"Add action callback behavior tests","scope":"components/game/modals/InventoryModal.test.tsx","action":"Add","description":"验证装备/卸下/使用物品回调参数，确保交互逻辑具备回归保护。","modification_points":[{"file":"components/game/modals/InventoryModal.test.tsx","target":"操作按钮测试段","change":"新增 onEquipItem/onUnequipItem/onUseItem 调用次数和参数断言"}],"implementation":["构造已装备武器与未装备武器、消耗品三个样例数据。","分别触发“装备”“卸下装备”“使用物品”按钮。","断言回调调用次数=1 且参数与当前选中 item/slot 一致。"],"test":{"unit":["未装备武器触发 onEquipItem","已装备武器触发 onUnequipItem","消耗品触发 onUseItem"],"commands":["npx vitest run components/game/modals/InventoryModal.test.tsx --testTimeout=60000"],"coverage_target":0.82},"acceptance":{"criteria":["交互回调用例数量 = 3","每个回调调用次数断言 = 1","参数匹配断言数量 >= 3"],"verification":["执行命令: npx vitest run components/game/modals/InventoryModal.test.tsx --testTimeout=60000","执行命令: rg -n \"onEquipItem|onUnequipItem|onUseItem\" components/game/modals/InventoryModal.test.tsx，应至少命中 3 处"]},"commit":{"type":"test","scope":"inventory-modal","message_template":"test(inventory-modal): verify equip/unequip/use callbacks","breaking":false},"depends_on":["T2"],"estimated_minutes":30,"priority":2}],"analysis":{"risk":"low","impact":"medium","complexity":"low"},"score":0.93,"is_bound":true,"created_at":"2026-02-13T13:23:22.519Z","bound_at":"2026-02-13T13:24:46.260Z"}
