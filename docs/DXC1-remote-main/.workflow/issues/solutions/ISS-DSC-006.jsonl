{"id":"SOL-ISS-DSC-006-f606","description":"为世界静默更新调用增加 Promise 错误兜底","approach":"在调度点显式处理 async Promise，统一记录错误并保持轮询不中断","tasks":[{"id":"T1","title":"Fix world update async error handling","scope":"hooks/useGameLogic.ts","action":"Fix","description":"将 handleSilentWorldUpdate 调用改为 await 或 .catch 路径，并接入现有 error/日志通道。","modification_points":[{"file":"hooks/useGameLogic.ts","target":"turn scheduler block around handleSilentWorldUpdate","change":"添加 Promise catch 与恢复逻辑"}],"implementation":["识别 scheduler 调用上下文是否可 await","不可 await 时使用 void promise.catch","catch 中写入 debug toast 或 error state"],"test":{"unit":["world update reject 不导致未处理异常"],"integration":[],"commands":["npm test -- tests/useGameLogic.legacy-save.test.tsx","npm run build"],"coverage_target":0.75},"regression":["定时更新触发次数不变","成功路径性能无明显退化(<5%)"],"acceptance":{"criteria":["在模拟 reject 场景下控制台无 UnhandledPromiseRejection","世界更新循环仍可继续下一次回合触发"],"verification":["执行测试并观察断言","构建通过"]},"commit":{"type":"fix","scope":"world-update","message_template":"fix(world-update): handle silent update promise rejection","breaking":false},"priority":1}],"analysis":{"risk":"medium","impact":"high","complexity":"low"},"score":0.9,"is_bound":true,"created_at":"2026-02-06T14:08:59.039Z","bound_at":"2026-02-06T14:08:59.816Z"}
