# 移动端菜单与导航重设计方案 (Mobile Menu Redesign)

## 1. 核心目标

优化移动端操作体验，解决当前"高频功能层级过深"和"单手操作不便"的问题。遵循 Google Material Design 3 规范，同时保持游戏的暗黑奇幻风格。

## 2. 现状问题诊断

### 2.1 底部导航栏 (Bottom Navigation)

- **现状**: `[角色] [手机] [对话] [任务] [菜单]`
- **问题**:
  1.  **功能错位**: 「手机」和「任务」并非最高频操作，却占据了黄金位置。
  2.  **核心缺失**: 「背包」和「地图」是探险游戏最高频的功能，目前却被藏在二级菜单中。
  3.  **视觉层级低**: 图标较小，缺乏选中态的明确反馈。

### 2.2 菜单浮层 (Menu Overlay)

- **现状**: 全屏遮罩 + 手风琴折叠列表。
- **问题**:
  1.  **操作繁琐**: 每次寻找功能都需要点击展开分类，增加了认知负荷。
  2.  **信息密度低**: 手风琴列表在展开时占据大量垂直空间，导致需要频繁滚动。

### 2.3 顶部状态栏 (Top Status Bar)

- **现状**: 右侧堆积了 4 个小图标 (地图/刷新/战斗/全屏)。
- **问题**: 触摸目标过小 (24px)，容易误触。

---

## 3. 重设计方案 (The Solution)

### 3.1 底部导航栏重构

采用 **5 Tab 布局**，将核心探索功能提权：

| 位置       | 功能 (旧) | 功能 (新)       | 理由                                                                        |
| :--------- | :-------- | :-------------- | :-------------------------------------------------------------------------- |
| **1 (左)** | 角色      | **对话 (Chat)** | 游戏的核心交互界面，置于拇指最易触达区域。                                  |
| **2**      | 手机      | **地图 (Map)**  | 探索时的核心工具，需随时一键呼出。                                          |
| **3 (中)** | 对话      | **背包 (Bag)**  | 冒险时的核心资源管理，需随时一键整理/使用。建议使用**突出显示的圆形按钮**。 |
| **4**      | 任务      | **角色 (Char)** | 查看属性和状态。                                                            |
| **5 (右)** | 菜单      | **更多 (More)** | 呼出新的控制中心，整合所有次要功能。                                        |

**交互细节**:

- 选中态增加**胶囊背景 (Pill Indicator)**，强化视觉反馈。
- 增加**触感反馈 (Haptic Feedback)**。

### 3.2 菜单控制中心 (Menu Control Center)

抛弃列表式菜单，改用 **宫格控制中心 (Grid Control Center)**。

- **布局逻辑**:
  - **上半部 (快捷宫格)**: 8个大图标宫格，涵盖高频次要功能。
    - `[装备]` `[技能]` `[任务]` `[手机]`
    - `[队伍]` `[眷族]` `[存档]` `[设置]`
  - **下半部 (功能列表)**: 紧凑列表，涵盖低频查询功能。
    - `剧情档案` `世界百科` `日常仪表盘` `记忆库` ...

- **视觉风格**:
  - 半透明玻璃态背景 (Backdrop Blur)。
  - 大尺寸可点击区域 (Min 48x48dp)。

### 3.3 顶部状态栏简化

- **左侧**: 时间 + 天气 (合并显示，减少空间占用)。
- **中间**: 地点名称 (保持不变)。
- **右侧**: 仅保留 `战斗模式切换` 和 `全屏`。
  - 移除 `地图` 按钮 (已移至底部导航)。
  - 移除 `刷新地图` 按钮 (整合进地图页面内部)。

---

## 4. 实现建议

### 4.1 新组件结构

建议拆分为以下独立组件进行开发：

1.  `MobileNavBar.tsx`: 底部导航栏，接收 `activeTab` 和 `onTabData` props。
2.  `MobileControlCenter.tsx`: 菜单浮层，接收 `isOpen` 和 `onClose` props。
3.  `MobileStatusBar.tsx`: 顶部状态栏。

### 4.2 适配工作

需要修改 `GameInterface.tsx` 中的状态管理逻辑：

- 将 `mobileActiveTab` 的枚举值更新为: `'CHAT' | 'MAP' | 'BACKPACK' | 'CHAR' | 'MENU'` (Menu 仅作为呼出控制中心的触发器，不作为持久 Tab)。

## 5. 预期收益

- **操作效率提升**: 访问地图和背包的步骤从 2 步减少到 1 步。
- **误触率降低**: 增大的触摸目标和合理的间距。
- **视觉现代化**: 符合现代移动端 APP 的审美习惯。
